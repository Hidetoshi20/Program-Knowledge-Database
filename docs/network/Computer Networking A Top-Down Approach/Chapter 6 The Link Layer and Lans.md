# Chapter 6: The Link Layer and Lans

## 6.1 链路层概述

两种不同类型的链路层信道：

1. 广播信道

点对点通信链路

### 6.1.1 链路层提供的服务

将运行链路层协议的任何设备均称为节点

把沿着通信路径连接相邻节点的通信信道称为链路

## 6.2 差错检测和纠正技术

链路层提供的两种服务：比特级差错检测和纠正

要保护的数据不仅包括从网络层传递下来的数据报，还包括链路帧首部

差错检测和纠错技术越复杂，未检测出比特差错概率就更小，导致的开销就越大

传输数据中检测差错的3种技术

1. 奇偶校验：描述差错检测和纠正背后隐含的基本思想
2. 检验和方法：更多的用于运输层
3. 循环冗余检测：更多用于链路层

### 6.2.1 奇偶校验

单个奇偶校验位：在偶校验方案中，发送方只需包含一个附加的比特使得这些信息加上校验比特中1的总数为偶数

在一个分组中多个比特同时出错的概率将是极小的

如果差错经常以“突发”方式聚集在一起，而不是独立的发生，单比特奇偶校验保护的一帧中未检测出差错的概率能够到50%

二维校验：讲信息中的d个比特划分为i行j列，出了总的校验，还有行校验和列校验，因此不仅可以检测出是否有差错比特，还可以纠正它。同时可以检测（不能纠正）一个分组中两个比特差错的任何组合。可以检测加上修正校验比特本身

接收方检测和纠正差错的能力被称为前向纠错（FEC），FEC避免了不得不等待的往返时延，对于实时网络应用或者长传播时延的链路是非常重要的优点

### 6.2.2 校验和方法

将d比特数据加起来，用得到的和作为差错检测比特

因特网检验和就给予这种方法

### 6.2.3 循环冗余检测

CRC：也被称为多项式编码，该编码将发送的比特串看作多项式

发送方首先和接收方协商一个r+1比特模式，称为生成多项式，将其表示为G，要求G的最高有效位的比特是1

## 6.3 多路访问链路和协议

两种网络链路：点对点链路和广播链路

点对点链路：点对点协议（PPP） 高级数据链路控制（HDLC）

广播链路：以太网 无线局域网

如何协调多个发送和接收节点对一个共享广播信道的访问，就是多路访问问题 广播信道通常用于局域网中

碰撞：传输的帧在左右的接收方处碰撞

可以将任何多路访问协议划分为3种类型之一：信道划分协议，随机接入协议，轮流协议

多路访问协议应高具有一下所希望的特性：

1. 当仅有一个节点发送数据时，该节点具有R bps的吞吐量
2. M个节点发送数据时，每个节点的平均吞吐量有R/M的平均传输速率
3. 协议是分散的；不会因某猪节点故障而使整个系统崩溃
4. 协议是简单的

### 6.3.1 信道划分协议

时分多路复用（TDM）和频分多路复用（FDM）

TDM较为简单，但是每个节点的时间被限制，尤其是当节点是唯一有帧要发送的时候

FDM创建若干个较小的信道，同样限制了速率

第三种：码分多址（CDMA） CDMA对每个节点分配一种不同的编码，如果编码呗精心选择，不同的节点能够同时传输

### 6.3.2 随机接入协议

一个传输节点总是以信道的全部速率进行发送，当有碰撞时，涉及碰撞的每个节点反复重发它的帧，在重发该帧之前等待一个随机时延

最常用的随机接入协议：ALOHA和载波侦听多路访问（CSMA）

以太网是一种流行并广泛部署的CSMA协议

1 时隙ALOHA

## 6.4 交换局域网

### 6.4.1 链路层寻址和ARP

ARP：地址解析协议

### 1 MAC地址

适配器（网络接口）有链路层地址

MAC地址具有扁平结构，无论适配器在哪都不会改变，IP地址与一个人的邮政地址相似，是有层次的，主机移动，IP地址也会改变

### 2 地址解析协议

### 3 发送数据包到子网以外

### 6.4.2 以太网